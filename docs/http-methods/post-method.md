# POST Method

## Назначение

Метод **POST** используется для **создания новых данных** на сервере.  
В отличие от GET, POST изменяет состояние приложения и не является идемпотентным.  
Каждый новый запрос обычно создаёт новый ресурс.

---

## Структура запроса

| Компонент | Используется | Пример | Описание |
|------------|--------------|---------|-----------|
| **params** | ⚙️ | `/drivers` | Может отсутствовать или включать контекст |
| **query** | ⚙️ | `/drivers?notify=true` | Дополнительные настройки |
| **body** | ✅ | `{ "name": "John", "email": "john@mail.com" }` | Основные данные создаваемого ресурса |
| **headers** | ⚙️ | `Content-Type: application/json` | Тип данных, авторизация, контекст |

---

## Типизация (Express + TypeScript)

```ts
app.post(
  '/drivers',
  (
    req: Request<{}, Driver, CreateDriverDto, {}>,
    res: Response<Driver | { error: string }>
  ) => {
    const { name, email } = req.body;
    if (!name || !email) {
      return res.status(400).send({ error: 'Invalid data' });
    }
    const newDriver: Driver = { id: Date.now(), ...req.body, createdAt: new Date() };
    db.drivers.push(newDriver);
    res.status(201).send(newDriver);
  }
);
```

---

## Типичные коды ответов

| Код | Описание |
|------|-----------|
| **201 Created** | Ресурс успешно создан |
| **400 Bad Request** | Ошибка в теле запроса |
| **409 Conflict** | Конфликт при создании ресурса (например, дублирование email) |
| **500 Internal Server Error** | Ошибка на стороне сервера |

---

## Пример запроса и ответа

**Запрос:**
```
POST /drivers
Content-Type: application/json
```
**Тело:**
```json
{
  "name": "John",
  "phoneNumber": "123-456-7890",
  "email": "john@example.com"
}
```

**Ответ 201:**
```json
{
  "id": 1,
  "name": "John",
  "email": "john@example.com",
  "createdAt": "2025-10-12T10:00:00Z"
}
```

---

## Особенности метода POST

- Имеет тело запроса (`body`).
- Изменяет состояние данных на сервере.
- Не является идемпотентным (повторный запрос создаст новый ресурс).
- Используется для операций "создания".
- Может возвращать `Location` в заголовках с URL нового ресурса.

---

## Сравнение с другими методами

| Метод  | Изменяет данные | Есть тело (`body`) | Типичный код успеха |
|---------|------------------|------------------|----------------------|
| **GET**     | ❌               | ❌               | 200 |
| **POST**    | ✅ (создание)    | ✅               | 201 |
| **PUT**     | ✅ (обновление)  | ✅               | 200 / 204 |
| **DELETE**  | ✅ (удаление)    | ❌               | 204 |
