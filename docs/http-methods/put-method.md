# PUT Method

## Назначение

Метод **PUT** используется для **обновления существующих данных** или **замены ресурса целиком**.  
В отличие от POST, PUT является **идемпотентным** — повторный запрос с одинаковыми данными не изменяет результат.

---

## Структура запроса

| Компонент | Используется | Пример | Описание |
|------------|--------------|---------|-----------|
| **params** | ✅ | `/drivers/:id` | Указывает, какой ресурс обновить |
| **query** | ⚙️ | `/drivers/:id?notify=true` | Дополнительные параметры |
| **body** | ✅ | `{ "name": "Updated Name" }` | Новые данные ресурса |
| **headers** | ⚙️ | `Content-Type: application/json` | Формат тела и авторизация |

---

## Типизация (Express + TypeScript)

```ts
app.put(
  '/drivers/:id',
  (
    req: Request<{ id: string }, Driver, UpdateDriverDto, {}>,
    res: Response<Driver | { error: string }>
  ) => {
    const { id } = req.params;
    const index = db.drivers.findIndex(d => d.id === +id);
    if (index === -1) {
      return res.status(404).send({ error: 'Driver not found' });
    }
    db.drivers[index] = { ...db.drivers[index], ...req.body };
    res.status(200).send(db.drivers[index]);
  }
);
```

---

## Типичные коды ответов

| Код | Описание |
|------|-----------|
| **200 OK** | Ресурс успешно обновлён |
| **204 No Content** | Обновление прошло успешно, но тело не возвращается |
| **400 Bad Request** | Неверные данные |
| **404 Not Found** | Ресурс не найден |
| **500 Internal Server Error** | Ошибка сервера |

---

## Пример запроса и ответа

**Запрос:**
```
PUT /drivers/1
Content-Type: application/json
```
**Тело:**
```json
{
  "name": "John Updated",
  "vehicleModel": "Audi Q5"
}
```

**Ответ 200:**
```json
{
  "id": 1,
  "name": "John Updated",
  "vehicleModel": "Audi Q5",
  "updatedAt": "2025-10-12T10:00:00Z"
}
```

---

## Особенности метода PUT

- Имеет тело запроса (`body`).
- Заменяет или обновляет данные полностью.
- Идемпотентен — повторный запрос с теми же данными не меняет результат.
- Используется для операций "обновления".

---

## Сравнение с другими методами

| Метод  | Изменяет данные | Есть тело (`body`) | Типичный код успеха |
|---------|------------------|------------------|----------------------|
| **GET**     | ❌               | ❌               | 200 |
| **POST**    | ✅ (создание)    | ✅               | 201 |
| **PUT**     | ✅ (обновление)  | ✅               | 200 / 204 |
| **DELETE**  | ✅ (удаление)    | ❌               | 204 |
